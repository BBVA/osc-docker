machine:
  services:
    - docker

dependencies:
  override:
    - docker info
    - docker build --rm=false -t bbvalabs/osc-docker .

test:
  override:
    - >
      if [ $(docker run -t -i bbvalabs/osc-docker pip list --format columns | awk '/ceilometer|cinder|designate|glance|heat|keystone|magnum|neutron|nova|openstack|sahara|swift|trove/{ print $1 }' | wc -l) != 3 ]; then
       exit -1;
      fi
    - docker run -t -i bbvalabs/osc-docker pip list --format columns | grep

deployment:
  hub:
    branch: eurocloud
    commands:
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
      - docker push bbvalabs/osc-docker
